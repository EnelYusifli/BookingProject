@{
	Layout = "~/Views/Shared/OwnerLayout.cshtml";
	int id = ViewBag.Id;
}
@model RoomUpdateViewModel
<section class="pt-0">
	<div class="container vstack gap-4">
		<form method="post" enctype="multipart/form-data" id="mainForm2"  asp-action="updateroom" >
	<div class="vstack gap-4">
		<!-- Title -->
		<h4 class="mb-0">Update Room</h4>
		<!-- Room options START -->
		<div class="card shadow room-card">
			<!-- Card header -->
			<div class="card-header border-bottom">
				<h5 class="mb-0">Room Options</h5>
			</div>

			<!-- Card body START -->
			<div class="card-body">
				<div class="row g-4">
					<!-- Room name -->
					<div class="col-md-6">
						<label class="form-label">Room name *</label>
						<input class="form-control" placeholder="Enter name" asp-for="@Model.RoomName">
								<span asp-validation-for="@Model.RoomName" class="text-danger"></span>

					</div>

					<!-- Room images -->
					<div class="col-md-6">
						<label class="form-label">Upload new images</label>
						<input class="form-control" accept="image/jpg, image/jpeg, image/png" multiple asp-for="@Model.ImageFiles">
								<span asp-validation-for="@Model.ImageFiles" class="text-danger"></span>
					</div>
							
					<!-- Room Price -->
					<div class="col-md-6">
						<label class="form-label">Room Price Per Night *</label>
						<input class="form-control" placeholder="Enter price" asp-for="@Model.PricePerNight">
								<span asp-validation-for="@Model.PricePerNight" class="text-danger"></span>
					</div>

					<!-- ServiceFee -->
					<div class="col-md-6">
						<label class="form-label">Service Fee *</label>
						<input class="form-control" placeholder="Enter fee" asp-for="@Model.ServiceFee">
								<span asp-validation-for="@Model.ServiceFee" class="text-danger"></span>
					</div>
					<!-- Deposit -->
					<div class="col-md-6">
						<label class="form-label">Deposit needed(10%) *</label>
								<input  asp-for="@Model.IsDepositNeeded">
					</div>

					<!-- Area -->
					<div class="col-md-6">
						<label class="form-label">Area *</label>
						<input class="form-control" placeholder="Enter area" asp-for="@Model.Area">
								<span asp-validation-for="@Model.Area" class="text-danger"></span>
					</div>

					<!-- AdultCount -->
					<div class="col-md-6">
						<label class="form-label">Adult Count *</label>
						<input class="form-control" placeholder="Enter adult count" asp-for="@Model.AdultCount">
								<span asp-validation-for="@Model.AdultCount" class="text-danger"></span>
					</div>

					<!-- ChildCount -->
					<div class="col-md-6">
						<label class="form-label">Child Count *</label>
						<input class="form-control" placeholder="Enter child count" asp-for="@Model.ChildCount">
								<span asp-validation-for="@Model.ChildCount" class="text-danger"></span>
					</div>

					<!-- Cancel info -->
							<div class="col-md-6">
								<label class="form-label">Cancellation info *</label>
								<select class="form-select js-choice border-0 z-index-9 bg-transparent" id="isCancellable" asp-for="@Model.IsCancellable">
									<option value="">Select item</option>
									<option value="false">Non Refundable</option>
									<option value="true">Free Cancellation</option>
								</select>
								<span asp-validation-for="@Model.IsCancellable" class="text-danger"></span>
								<div id="cancelAfterDayCard" style="display: none;">
									<label class="form-label">Cancel after x days *</label>
									<input class="form-control" placeholder="Enter day count" min="0" id="cancelAfterDay" asp-for="@Model.CancelAfterDay">
									<span asp-validation-for="@Model.CancelAfterDay" class="text-danger"></span>
								</div>
							</div>
							<div class="col-md-6">
									<label class="form-label">Existing images</label>
									<div class="row">
										@foreach (var image in Model.Images)
										{
											<div class="col-md-3 mb-3">
												<div class="card">
													<img src="@image.Url" class="card-img-top" alt="Image @image.Id">
													<div class="card-body">
														<div class="form-check">
															<input class="form-check-input" type="checkbox" id="deleteImage_@image.Id" name="imageids" value="@image.Id">
															<label class="form-check-label" for="deleteImage_@image.Id">Delete</label>

														</div>
													</div>
												</div>
											</div>
										}
									</div>
								<span asp-validation-for="@Model.Images" class="text-danger"></span>
									<input type="hidden" name="DeletedImageFileIds" asp-for="@Model.DeletedImageFileIds" id="DeletedImageIds">
									<input type="hidden" asp-for="@Model.Id" value="@id">
									<input type="hidden" asp-for="@Model.ImageCount" value="@Model.Images.Count()">
								</div>
							@* <div class="col-md-6">
								<!-- Button trigger modal -->
								<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createDiscountModal">
									Create Discount
								</button>
							</div>

							<!-- Modal -->
							<div class="modal fade" id="createDiscountModal" tabindex="-1" role="dialog" aria-labelledby="createDiscountModalLabel" aria-hidden="true">
								<div class="modal-dialog" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="createDiscountModalLabel">Create Discount</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											<!-- Form to submit discount data -->
											<form id="createDiscountForm" method="POST" action="/owner/CreateDiscount">
													<input type="hidden" value="@Model.Id" class="form-control" id="roomId" name="RoomId" required>
												<div class="form-group">
													<label for="percent">Percent:</label>
													<input type="number" class="form-control" id="percent" name="Percent" required>
												</div>
												<div class="form-group">
													<label for="startTime">Start Time:</label>
													<input type="datetime-local" class="form-control" id="startTime" name="StartTime" required>
												</div>
												<div class="form-group">
													<label for="endTime">End Time:</label>
													<input type="datetime-local" class="form-control" id="endTime" name="EndTime" required>
												</div>
												<button type="submit" class="btn btn-primary">Submit</button>
											</form>
										</div>
									</div>
								</div>
							</div> *@

				</div>
			</div>
			<div class="card-body">
				<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			</div>

			<!-- Card body END -->
		</div>
		<!-- Room options END -->
		<!-- Step 3 button -->
		<div class="d-flex justify-content-between">
			<div class="text-end">
				<button type="submit" class="btn btn-success" >Update Room</button>
			</div>
		</div>
	</div>
</form>
	</div>
	</section>
<script>
	document.getElementById('isCancellable').addEventListener('change', function () {
		var cancelAfterDayCard = document.getElementById('cancelAfterDayCard');
		if (this.value === 'true') {
			cancelAfterDayCard.style.display = 'block';
		} else {
			cancelAfterDayCard.style.display = 'none';
		}
	});
</script>
<style>
	.form-check-input {
		display: none;
	}

	.form-check-label {
		display: inline-block;
		padding: 5px 10px;
		background-color: #dc3545;
		color: #fff;
		border: none;
		border-radius: 4px;
		cursor: pointer;
		font-size: 14px;
		text-align: center;
		transition: background-color 0.3s;
	}

	.form-check-input:checked + .form-check-label {
		background-color: #c82333;
		box-shadow: 0 0 5px rgba(0,0,0,0.2);
	}

	.form-check-label:hover {
		background-color: #bd2130;
	}

	.form-check-input:checked + .form-check-label::after {
		content: ' ✓';
		font-weight: bold;
	}
</style>
